<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Kestrel 5400 WBGT/TWL Demo</title>
<style>
  :root { --pad: 16px; --border:#e5e5e5; }
  body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;margin:var(--pad);line-height:1.5}
  main{max-width:1000px;margin:auto}
  .tabs{display:flex;gap:8px;border-bottom:1px solid var(--border);margin-bottom:12px;flex-wrap:wrap}
  .tab{padding:8px 12px;border:1px solid var(--border);border-bottom:none;border-top-left-radius:10px;border-top-right-radius:10px;background:#fafafa;cursor:pointer}
  .tab.active{background:#fff;font-weight:600}
  .panel{border:1px solid var(--border);border-radius:10px;padding:16px}
  .muted{color:#666}
  .pill{display:inline-block;padding:4px 10px;border:1px solid var(--border);border-radius:999px;background:#fafafa;margin-right:6px}
</style>
</head>
<body>
<main>
  <nav class="tabs">
    <button class="tab active" data-tab="main">Main</button>
    <button class="tab" data-tab="data">Data</button>
    <button class="tab" data-tab="steps">How-To Steps</button>
    <button class="tab" data-tab="glossary">Glossary</button>
    <button class="tab" data-tab="images">Images</button>
  </nav>

  <!-- Main: high-level project overview -->
  <section id="main" class="panel">
    <h1>Kestrel 5400 — Heat Stress & Microclimate Demo</h1>
    <p>
      This project evaluates the practicality of using a Kestrel 5400 Heat Stress Tracker to measure
      <strong>temperature</strong> and other relevant environmental factors at <strong>transit stops</strong> and
      <strong>intersections</strong>. We collect field data and visualize indices used in heat-risk management.
    </p>

    <p>
      View the project on GitHub:
      <a href="https://github.com/robert-z-lehr/kestrel-wbgt-demo/tree/main" target="_blank" rel="noopener">
      robert-z-lehr/kestrel-wbgt-demo
      </a>
    </p>

    <h2>Purpose</h2>
    <ul>
      <li>Assess repeatable measurement protocols at curbside locations (bus stops, crosswalks, medians).</li>
      <li>Compare micro-environments (sun/shade, asphalt/grass, wind exposure) and their impact on heat stress.</li>
      <li>Demonstrate transparent <em>data provenance</em>: device settings, placement, logging, and export steps.</li>
    </ul>

    <h2>What’s in this site</h2>
    <p class="muted">Use the tabs above:</p>
    <p>
      <span class="pill">Data</span> Upload or fetch your CSV and render charts.<br>
      <span class="pill">How-To Steps</span> Field checklist based on the user guide (plus link to the full manual).<br>
      <span class="pill">Glossary</span> Definitions, formulas, and how each variable is used.<br>
      <span class="pill">Images</span> Site photos, device setup, and an example SVG illustration.
    </p>

    <h2>Outputs</h2>
    <ul>
      <li>Interactive charts (WBGT, components) for selected sessions.</li>
      <li>Documented protocol and references (see <code>docs/</code> folder in the repo).</li>
      <li>Reproducible folder layout for GitHub Pages deployments.</li>
    </ul>

    <p class="muted">Tip: See <code>docs/protocol.md</code> and <code>docs/references.md</code> for methods and provenance.</p>
  </section>

  <!-- Loaded on demand -->
  <section id="data" class="panel" hidden></section>
  <section id="steps" class="panel" hidden></section>
  <section id="glossary" class="panel" hidden></section>
  <section id="images" class="panel" hidden></section>
</main>

<script>
/* --- Tabs & lazy loading --- */
const tabs = document.querySelectorAll('.tab');
const panels = {
  main: document.getElementById('main'),
  data: document.getElementById('data'),
  steps: document.getElementById('steps'),
  glossary: document.getElementById('glossary'),
  images: document.getElementById('images')
};

async function openTab(name){
  tabs.forEach(t => t.classList.toggle('active', t.dataset.tab===name));
  Object.entries(panels).forEach(([k,el]) => el.hidden = (k!==name));
  if (name==='data' && !panels.data.dataset.loaded){
    const html = await fetch('html/data.html').then(r=>r.text());
    panels.data.innerHTML = html;
    panels.data.dataset.loaded = '1';
  }
  if (name==='steps' && !panels.steps.dataset.loaded){
    const html = await fetch('html/steps.html').then(r=>r.text());
    panels.steps.innerHTML = html;
    panels.steps.dataset.loaded = '1';
  }
  if (name==='glossary' && !panels.glossary.dataset.loaded){
    const html = await fetch('html/glossary.html').then(r=>r.text());
    panels.glossary.innerHTML = html;
    panels.glossary.dataset.loaded = '1';
  }
  if (name==='images' && !panels.images.dataset.loaded){
    const html = await fetch('html/images.html').then(r=>r.text());
    panels.images.innerHTML = html;
    panels.images.dataset.loaded = '1';
  }
}
tabs.forEach(btn => btn.addEventListener('click', () => openTab(btn.dataset.tab)));
</script>
</body>
</html>
